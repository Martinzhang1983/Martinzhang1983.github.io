<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R.N.G.M.E.E. 全系统睡眠效能测评 | 功能医学架构师</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #f0f4f8;
            color: #1e293b;
        }

        .dimension-card {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .dimension-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .dimension-card.active {
            border-left-color: #3b82f6;
        }

        .checkbox-wrapper input:checked + div {
            background-color: #eff6ff;
            border-color: #3b82f6;
            color: #1e40af;
        }

        .checkbox-wrapper input:checked + div .check-icon {
            opacity: 1;
            transform: scale(1);
        }

        .btn-primary {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }

        .result-card {
            animation: slideUp 0.5s ease-out forwards;
            opacity: 0;
            transform: translateY(20px);
        }

        @keyframes slideUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Modal Styles */
        .modal {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-3xl mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fa-solid fa-dna text-blue-600 text-xl"></i>
                <h1 class="font-bold text-lg text-slate-800">深度睡眠优化师</h1>
            </div>
            <div class="text-xs font-medium bg-blue-50 text-blue-600 px-3 py-1 rounded-full">
                System Architect Edition
            </div>
        </div>
    </header>

    <!-- Intro Section -->
    <main class="flex-grow max-w-3xl mx-auto px-4 py-8 w-full" id="assessment-area">
        <div class="bg-white rounded-2xl p-6 mb-8 shadow-sm border border-slate-100">
            <h2 class="text-2xl font-bold text-slate-800 mb-2">睡眠-系统失衡初步筛查表</h2>
            <p class="text-slate-500 text-sm mb-4">The R.N.G.M.E.E. Functional Sleep Audit</p>
            <div class="bg-blue-50 p-4 rounded-xl border border-blue-100">
                <div class="flex items-start space-x-3">
                    <i class="fa-solid fa-user-doctor text-blue-600 mt-1"></i>
                    <div>
                        <h3 class="font-bold text-blue-800 text-sm mb-1">架构师寄语</h3>
                        <p class="text-blue-700 text-sm leading-relaxed">
                            睡眠问题 ≠ 单一神经问题，而是多系统协同失衡的结果。<br>
                            我们采用 <b>R.N.G.M.E.E. 全系统模型</b> 对您的生理硬件进行全维扫描。<br>
                            请根据您<b>过去 1 个月</b>的真实身体感受，勾选以下症状。
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <form id="sleep-audit-form" onsubmit="calculateResults(event)">
            
            <!-- Dimension 1: R - Rhythm -->
            <div class="dimension-card bg-white rounded-xl p-6 mb-6 shadow-sm border border-slate-100" id="dim-1">
                <div class="flex items-center mb-4 border-b border-slate-100 pb-3">
                    <div class="w-8 h-8 rounded-lg bg-indigo-100 text-indigo-600 flex items-center justify-center mr-3 font-bold">R</div>
                    <div>
                        <h3 class="font-bold text-slate-800">生物节律与激素轴 (Rhythm)</h3>
                        <p class="text-xs text-slate-500">排查核心：HPA轴功能与皮质醇节律</p>
                    </div>
                </div>
                <div class="space-y-3">
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim1" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>晨起“启动”困难</b>：早晨醒来身体极沉，像没睡一样，上午长时间昏沉。</span>
                        </div>
                    </label>
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim1" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>夜间“回光返照”</b>：晚上10点后精神变好，思维活跃，比白天更清醒。</span>
                        </div>
                    </label>
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim1" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>长期夜醒/早醒</b>：经常在凌晨3-4点醒来后再难入睡，或睡眠很浅。</span>
                        </div>
                    </label>
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim1" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>假性熬夜</b>：身体很累但不想睡，非要拖到某个点才能勉强入睡。</span>
                        </div>
                    </label>
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim1" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>周末补觉依赖</b>：工作日睡不醒，周末必须睡到中午才能缓过来。</span>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Dimension 2: N - Neuro -->
            <div class="dimension-card bg-white rounded-xl p-6 mb-6 shadow-sm border border-slate-100" id="dim-2">
                <div class="flex items-center mb-4 border-b border-slate-100 pb-3">
                    <div class="w-8 h-8 rounded-lg bg-purple-100 text-purple-600 flex items-center justify-center mr-3 font-bold">N</div>
                    <div>
                        <h3 class="font-bold text-slate-800">神经递质与压力系统 (Neuro)</h3>
                        <p class="text-xs text-slate-500">排查核心：GABA/血清素状态与交感兴奋</p>
                    </div>
                </div>
                <div class="space-y-3">
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim2" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>入睡前思维奔逸</b>：躺下后脑子像开会，不由自主复盘或担忧。</span>
                        </div>
                    </label>
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim2" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>无法静止</b>：很难真正放松，休息时也感到内心紧迫感。</span>
                        </div>
                    </label>
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim2" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>声音/光线敏感</b>：睡眠极浅，微弱声响或光线变动都会引发惊跳。</span>
                        </div>
                    </label>
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim2" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>肌肉紧绷</b>：有磨牙习惯，或早晨醒来感觉下巴、肩颈僵硬酸痛。</span>
                        </div>
                    </label>
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim2" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>情绪波动</b>：近期感到更容易易怒、焦虑或情绪低落。</span>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Dimension 3: G - Gut -->
            <div class="dimension-card bg-white rounded-xl p-6 mb-6 shadow-sm border border-slate-100" id="dim-3">
                <div class="flex items-center mb-4 border-b border-slate-100 pb-3">
                    <div class="w-8 h-8 rounded-lg bg-green-100 text-green-600 flex items-center justify-center mr-3 font-bold">G</div>
                    <div>
                        <h3 class="font-bold text-slate-800">肠道微生态 × 睡眠轴 (Gut)</h3>
                        <p class="text-xs text-slate-500">排查核心：肠道炎症与脑雾</p>
                    </div>
                </div>
                <div class="space-y-3">
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim3" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>腹胀难眠</b>：晚饭后经常感到腹胀、打嗝或不适，影响入睡。</span>
                        </div>
                    </label>
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim3" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>食物敏感</b>：吃完面食、牛奶后，会感到脑雾加重、犯困或鼻塞。</span>
                        </div>
                    </label>
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim3" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>排便异常</b>：经常便秘、腹泻，或者大便不成形、粘马桶。</span>
                        </div>
                    </label>
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim3" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>情绪化进食</b>：压力大时特别渴望吃甜食、面包等高碳水食物。</span>
                        </div>
                    </label>
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim3" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>过敏体质</b>：有慢性鼻炎、湿疹或不明原因瘙痒（组胺高）。</span>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Dimension 4: M - Metabolism -->
            <div class="dimension-card bg-white rounded-xl p-6 mb-6 shadow-sm border border-slate-100" id="dim-4">
                <div class="flex items-center mb-4 border-b border-slate-100 pb-3">
                    <div class="w-8 h-8 rounded-lg bg-orange-100 text-orange-600 flex items-center justify-center mr-3 font-bold">M</div>
                    <div>
                        <h3 class="font-bold text-slate-800">代谢与慢病因素 (Metabolism)</h3>
                        <p class="text-xs text-slate-500">排查核心：血糖波动与胰岛素抵抗</p>
                    </div>
                </div>
                <div class="space-y-3">
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim4" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>定时惊醒</b>：经常在凌晨1-3点准时醒来，且意识清醒。</span>
                        </div>
                    </label>
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim4" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>午后能量崩溃</b>：每天下午3-4点能量断崖式下跌，必须吃东西提神。</span>
                        </div>
                    </label>
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim4" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>夜间盗汗/心悸</b>：醒来时发现出汗，或者心跳很快，感到心慌。</span>
                        </div>
                    </label>
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim4" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>腹部肥胖</b>：四肢尚可，但肚子很大，减不下来（胰岛素抵抗）。</span>
                        </div>
                    </label>
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim4" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>打鼾/憋气</b>：睡觉打呼噜严重，或晨起嗓子极干、头痛。</span>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Dimension 5: E - Energy -->
            <div class="dimension-card bg-white rounded-xl p-6 mb-6 shadow-sm border border-slate-100" id="dim-5">
                <div class="flex items-center mb-4 border-b border-slate-100 pb-3">
                    <div class="w-8 h-8 rounded-lg bg-teal-100 text-teal-600 flex items-center justify-center mr-3 font-bold">E</div>
                    <div>
                        <h3 class="font-bold text-slate-800">微量营养与线粒体 (Energy)</h3>
                        <p class="text-xs text-slate-500">排查核心：能量产能与营养缺乏</p>
                    </div>
                </div>
                <div class="space-y-3">
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim5" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>睡后无力</b>：即使睡够时长，醒来身体沉重，没有“充电”感。</span>
                        </div>
                    </label>
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim5" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>多梦/梦魇</b>：整晚做梦，醒来累（可能缺乏B6/镁）。</span>
                        </div>
                    </label>
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim5" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>眼皮/肌肉跳动</b>：眼皮跳、腿抽筋或肌肉抽动（缺镁）。</span>
                        </div>
                    </label>
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim5" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>脑雾严重</b>：记忆力下降，反应迟钝，难以集中注意力。</span>
                        </div>
                    </label>
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim5" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>手脚冰凉</b>：入睡前手脚怎么也捂不热，体温偏低。</span>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Dimension 6: E - Environment -->
            <div class="dimension-card bg-white rounded-xl p-6 mb-6 shadow-sm border border-slate-100" id="dim-6">
                <div class="flex items-center mb-4 border-b border-slate-100 pb-3">
                    <div class="w-8 h-8 rounded-lg bg-gray-100 text-gray-600 flex items-center justify-center mr-3 font-bold">E</div>
                    <div>
                        <h3 class="font-bold text-slate-800">环境与行为因素 (Environment)</h3>
                        <p class="text-xs text-slate-500">排查核心：睡眠卫生与物理干扰</p>
                    </div>
                </div>
                <div class="space-y-3">
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim6" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>睡前蓝光</b>：睡前1小时内还在刷手机、看平板，未开护眼模式。</span>
                        </div>
                    </label>
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim6" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>光线干扰</b>：卧室遮光差，路灯透进来，或有设备指示灯。</span>
                        </div>
                    </label>
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim6" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>温度不适</b>：经常因太热或太冷醒来，室温高于23℃。</span>
                        </div>
                    </label>
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim6" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>睡前饮食</b>：习惯喝酒助眠，或睡前2小时内吃夜宵。</span>
                        </div>
                    </label>
                    <label class="checkbox-wrapper cursor-pointer block">
                        <input type="checkbox" name="dim6" value="1" class="hidden">
                        <div class="border border-slate-200 rounded-lg p-3 flex items-center transition-colors hover:bg-slate-50">
                            <div class="w-5 h-5 rounded border border-slate-300 mr-3 flex items-center justify-center bg-white check-icon opacity-20 transform scale-75 transition-all">
                                <i class="fa-solid fa-check text-xs text-white"></i>
                            </div>
                            <span class="text-sm text-slate-700 select-none"><b>作息不规律</b>：上床睡觉时间每天波动超过1小时。</span>
                        </div>
                    </label>
                </div>
            </div>

            <div class="mt-8 mb-12 text-center">
                <button type="submit" class="btn-primary text-white font-bold py-4 px-10 rounded-full text-lg shadow-lg transform hover:scale-105 transition-transform w-full md:w-auto">
                    诊断我的睡眠系统
                </button>
            </div>

        </form>

        <!-- Result Section (Hidden initially) -->
        <div id="results-area" class="hidden">
            <div class="bg-white rounded-2xl p-8 shadow-xl border-t-4 border-blue-600 mb-8 result-card">
                <h2 class="text-2xl font-bold text-center text-slate-800 mb-2">系统诊断报告</h2>
                <div class="text-center text-slate-500 mb-6 text-sm">Diagnosis ID: <span id="diag-id"></span></div>
                
                <div class="mb-8">
                    <h3 class="text-lg font-bold text-slate-800 mb-4 border-l-4 border-blue-500 pl-3">⚠️ 核心故障系统 (Core Failures)</h3>
                    <div id="high-risk-list" class="space-y-4">
                        <!-- Dynamic Content Here -->
                    </div>
                    <div id="no-risk-msg" class="hidden text-green-600 bg-green-50 p-4 rounded-lg text-center">
                        <i class="fa-solid fa-circle-check mr-2"></i> 您的睡眠系统目前运行相对平衡，未发现明显的高危故障点。
                    </div>
                </div>

                <div class="bg-slate-50 rounded-xl p-6 border border-slate-100 text-center">
                    <h3 class="font-bold text-slate-800 mb-2 flex items-center justify-center">
                        <i class="fa-solid fa-rocket text-blue-600 mr-2"></i> 
                        下一步行动 (Next Action)
                    </h3>
                    <p class="text-slate-600 text-sm mb-4">
                        找到问题只是第一步。针对您检出的系统故障，我为您准备了针对性的<b>修复手册（含食谱与补剂清单）</b>。
                    </p>
                    <button id="cta-button" onclick="revealContact()" class="w-full bg-slate-800 hover:bg-slate-900 text-white font-bold py-3 px-6 rounded-lg transition-colors flex items-center justify-center">
                        <i class="fa-solid fa-hand-pointer mr-2"></i> 点击获取干预方案
                    </button>
                    
                    <!-- Hidden Contact Info -->
                    <div id="contact-info" class="hidden mt-4 bg-yellow-50 p-4 rounded-lg border border-yellow-200 animate-pulse">
                        <p class="text-yellow-800 font-bold text-lg select-all">大张老师 微信号 Martinzhang1983</p>
                        <p class="text-xs text-yellow-700 mt-1">（长按复制微信号添加）</p>
                    </div>
                </div>
            </div>
            
            <div class="text-center">
                <button onclick="resetAudit()" class="text-slate-400 text-sm underline hover:text-slate-600">重新测评</button>
            </div>
        </div>

    </main>

    <footer class="bg-white border-t border-slate-100 py-6 mt-auto">
        <div class="max-w-3xl mx-auto px-4 text-center text-slate-400 text-xs">
            <p>&copy; 2023 深度睡眠优化师. All rights reserved.</p>
            <p class="mt-1">Disclaimer: 本测评仅供健康参考，不作为医疗诊断依据。</p>
        </div>
    </footer>

    <script>
        function calculateResults(e) {
            e.preventDefault();
            
            // R.N.G.M.E.E. Logic config
            const dimensions = [
                { id: 'dim1', name: '生物节律紊乱型', code: 'Rhythm', icon: 'fa-clock', advice: '需重点进行光照管理（晨间见光）与 HPA 轴修复。' },
                { id: 'dim2', name: '神经耗竭型', code: 'Neuro', icon: 'fa-brain', advice: '需重点进行神经调控（NSDR）与压力管理（补充镁）。' },
                { id: 'dim3', name: '肠脑失衡型', code: 'Gut', icon: 'fa-bacteria', advice: '需重点进行抗炎饮食与菌群调节（忌麸质/乳制品）。' },
                { id: 'dim4', name: '代谢危机型', code: 'Metabolism', icon: 'fa-bolt', advice: '需重点稳定血糖（睡前MCT油）与筛查呼吸暂停。' },
                { id: 'dim5', name: '能量匮乏型', code: 'Energy', icon: 'fa-battery-quarter', advice: '需重点补充微量元素（B族/辅酶Q10）与线粒体充电。' },
                { id: 'dim6', name: '环境干扰型', code: 'Environment', icon: 'fa-house', advice: '需重点进行卧室生物黑客改造（遮光/降温）。' }
            ];

            const formData = new FormData(e.target);
            let highRisks = [];

            dimensions.forEach((dim, index) => {
                const count = formData.getAll(`dim${index + 1}`).length;
                const card = document.getElementById(`dim-${index + 1}`);
                
                // Visual feedback on cards (optional)
                if (count >= 3) {
                    highRisks.push({ ...dim, count });
                    card.classList.add('border-red-400');
                } else {
                    card.classList.remove('border-red-400');
                }
            });

            // Render Results
            const resultsArea = document.getElementById('results-area');
            const formArea = document.getElementById('sleep-audit-form');
            const highRiskList = document.getElementById('high-risk-list');
            const noRiskMsg = document.getElementById('no-risk-msg');
            
            document.getElementById('diag-id').innerText = '#' + Math.floor(Math.random() * 10000);
            highRiskList.innerHTML = '';

            if (highRisks.length > 0) {
                noRiskMsg.classList.add('hidden');
                highRisks.forEach(risk => {
                    const html = `
                        <div class="bg-red-50 border border-red-100 rounded-lg p-4 flex items-start">
                            <div class="bg-red-100 text-red-500 w-10 h-10 rounded-full flex items-center justify-center shrink-0 mr-4 mt-1">
                                <i class="fa-solid ${risk.icon}"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-red-700 text-md">${risk.name} (得分: ${risk.count}/5)</h4>
                                <p class="text-red-600 text-sm mt-1 text-opacity-80">诊断提示：您的${risk.code}系统存在高风险失衡。</p>
                                <div class="mt-2 text-sm text-slate-700 bg-white bg-opacity-60 p-2 rounded">
                                    <span class="font-bold text-slate-800">架构师建议：</span> ${risk.advice}
                                </div>
                            </div>
                        </div>
                    `;
                    highRiskList.innerHTML += html;
                });
            } else {
                noRiskMsg.classList.remove('hidden');
            }

            // UX Transition
            formArea.classList.add('hidden');
            document.getElementById('assessment-area').scrollIntoView({ behavior: 'smooth' });
            resultsArea.classList.remove('hidden');
        }

        function resetAudit() {
            document.getElementById('sleep-audit-form').reset();
            document.getElementById('sleep-audit-form').classList.remove('hidden');
            document.getElementById('results-area').classList.add('hidden');
            document.getElementById('contact-info').classList.add('hidden'); // Hide contact info
            document.getElementById('cta-button').classList.remove('hidden'); // Show button again
            
            // Clear styles
            document.querySelectorAll('.dimension-card').forEach(card => {
                card.classList.remove('border-red-400');
            });
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function revealContact() {
            document.getElementById('cta-button').classList.add('hidden');
            document.getElementById('contact-info').classList.remove('hidden');
        }
    </script>
</body>
</html>
